<%
  def onoff (var)
    return var if var.is_a?(String)
    if var.is_a?(Boolean)
      return 'on' if var
      return 'off'
    end
  end
-%>

  PassengerAppRoot <%= app_root %>

<% if has_variable?(spawn_method) -%>
  PassengerSpawnMethod <%= spawn_method %>
<% end -%>

<% if has_variable?(global_queue)
-%>
  PassengerUseGlobalQueue <%= onoff(global_queue) -%>
<% end -%>

<% if has_variable?(passenger_enabled) -%>
  PassengerEnabled <%= onoff(passenger_enabled) %>
<% end -%>

<% if has_variable?(upload_buffer_dir) -%>
  PassengerUploadBufferDir <%= upload_buffer_dir -%>
<% end -%>

<% if has_variable?(restart_dir) -%>
  PassengerRestartDir <%= restart_dir %>
<% end -%>

<% if has_variable?(friendly_error_pages) -%>
  PassengerFriendlyErrorPages <%= onoff(friendly_error_pages) %>
<% end -%>

<% has_variable?(buffer_response) -%>
  PassengerBufferResponse <%= onoff(buffer_response) %>
<% end -%>

<% has_variable?(user) and user != '' -%>
  PassengerUser <%= user %>
<% end -%>

<% has_variable?(group) and group != '' -%>
  PassengerGroup <%= group %>
<% end -%>

<% has_variable?(min_instances) and min_instances != '' -%>
  PassengerMinInstances <%= min_instances %>
<% end -%>

<% has_variable?(max_requests) and max_requests != '' -%>
  PassengerMaxRequests <%= max_requests %>
<% end -%>

<% has_variable?(stat_throttle_rate) and stat_throttle_rate != '' -%>
  PassengerStatThrottleRate <%= stat_throttle_rate %>
<% end -%>

<% has_variable?(pre_start) and pre_start != '' -%>
  PassengerPreStart <%= pre_start %>
<% end -%>

<% has_variable?(high_performance) -%>
  PassengerHighPerformance <%= onoff(high_performance) %>
<% end -%>

<% has_variable?(rails_autodetect) -%>
  RailsAutoDetect <%= onoff(rails_autodetect) %>
<% end -%>

<% if has_variable?(rails_baseuri) and rails_baseuri != ''
    rails_baseuri = [ rails_baseuri ] unless rails_baseuri.is_a?(Array)
    rails_baseuri.each do |uri| 
-%>
  RailsBaseUri <%= uri %>
<%  end -%>
<% end -%>

<% if has_variable?(rails_env) and rails_env != ''
    rails_env = [ rails_env ] unless rails_env.is_a?(Array)
    rails_env.each do |env|
-%>
  RailsEnv <%= env %>
<%  end -%>
<% end -%>


<% has_variable?(rack_autodetect) -%>
  RackAutoDetect <%= onoff(rack_autodetect) %>
<% end -%>

<% if has_variable?(rack_baseuri) and rack_baseuri != ''
    rack_baseuri = [ rack_baseuri ] unless rack_baseuri.is_a?(Array)
    rack_baseuri.each do |uri|
-%>
  RackBaseUri <%= uri %>
<%  end -%>
<% end -%>

<% if has_variable?(rack_env) and rack_env != ''
    rack_env = [ rack_env ] unless rack_env.is_a?(Array)
    rack_env.each do |env|
-%>
  RackEnv <%= env %>
<%  end -%>
<% end -%>

